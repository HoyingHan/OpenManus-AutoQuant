#### 历史行情数据

##### 历史行情数据

接口: stock_zh_b_daily

目标地址: https://finance.sina.com.cn/realstock/company/sh900901/nc.shtml

描述: B 股数据是从新浪财经获取的数据, 历史数据按日频率更新

限量: 单次返回指定 B 股上市公司指定日期间的历史行情日频率数据

输入参数

| 名称         | 类型  | 描述                                                                                   |
|------------|-----|--------------------------------------------------------------------------------------|
| symbol     | str | symbol='sh900901'; 股票代码可以在 **ak.stock_zh_b_spot()** 中获取                              |
| start_date | str | start_date='20201103'; 开始查询的日期                                                       |
| end_date   | str | end_date='20201116'; 结束查询的日期                                                         |
| adjust     | str | 默认返回不复权的数据; qfq: 返回前复权后的数据; hfq: 返回后复权后的数据; hfq-factor: 返回后复权因子; qfq-factor: 返回前复权因子 |

**股票数据复权**

1.为何要复权：由于股票存在配股、分拆、合并和发放股息等事件，会导致股价出现较大的缺口。
若使用不复权的价格处理数据、计算各种指标，将会导致它们失去连续性，且使用不复权价格计算收益也会出现错误。
为了保证数据连贯性，常通过前复权和后复权对价格序列进行调整。

2.前复权：保持当前价格不变，将历史价格进行增减，从而使股价连续。
前复权用来看盘非常方便，能一眼看出股价的历史走势，叠加各种技术指标也比较顺畅，是各种行情软件默认的复权方式。
这种方法虽然很常见，但也有两个缺陷需要注意。

2.1 为了保证当前价格不变，每次股票除权除息，均需要重新调整历史价格，因此其历史价格是时变的。
这会导致在不同时点看到的历史前复权价可能出现差异。

2.2 对于有持续分红的公司来说，前复权价可能出现负值。

3.后复权：保证历史价格不变，在每次股票权益事件发生后，调整当前的股票价格。
后复权价格和真实股票价格可能差别较大，不适合用来看盘。
其优点在于，可以被看作投资者的长期财富增长曲线，反映投资者的真实收益率情况。

4.在量化投资研究中普遍采用后复权数据。

输出参数-历史行情数据

| 名称                | 类型      | 描述            |
|-------------------|---------|---------------|
| date              | object  | 交易日           |
| close             | float64 | 收盘价           |
| high              | float64 | 最高价           |
| low               | float64 | 最低价           |
| open              | float64 | 开盘价           |
| volume            | float64 | 成交量; 注意单位: 股  |
| outstanding_share | float64 | 流动股本; 注意单位: 股 |
| turnover          | float64 | 换手率=成交量/流动股本  |

接口示例-历史行情数据(前复权)

```python
import akshare as ak

stock_zh_b_daily_qfq_df = ak.stock_zh_b_daily(symbol="sh900901", start_date="19900103", end_date="20240722", adjust="qfq")
print(stock_zh_b_daily_qfq_df)
```

数据示例-历史行情数据(前复权)

```
           date  open  high  ...     volume  outstanding_share  turnover
0    1992-02-21  0.18  0.23  ...   343000.0          1000000.0  0.343000
1    1992-02-24  0.22  0.23  ...  2896000.0          1000000.0  2.896000
2    1992-02-25  0.20  0.21  ...   181000.0          1000000.0  0.181000
3    1992-02-26  0.20  0.20  ...   305000.0          1000000.0  0.305000
4    1992-02-27  0.20  0.21  ...   330000.0          1000000.0  0.330000
...         ...   ...   ...  ...        ...                ...       ...
7418 2024-07-16  0.49  0.49  ...   540175.0        293370465.0  0.001841
7419 2024-07-17  0.49  0.49  ...   527360.0        293370465.0  0.001798
7420 2024-07-18  0.48  0.48  ...   825069.0        293370465.0  0.002812
7421 2024-07-19  0.48  0.50  ...   902574.0        293370465.0  0.003077
7422 2024-07-22  0.49  0.50  ...   994281.0        293370465.0  0.003389
[7423 rows x 8 columns]
```

接口示例-历史行情数据(后复权)

```python
import akshare as ak

stock_zh_b_daily_hfq_df = ak.stock_zh_b_daily(symbol="sh900901", start_date="19900103", end_date="20240722", adjust="hfq")
print(stock_zh_b_daily_hfq_df)
```

数据示例-历史行情数据(后复权)

```
           date    open    high  ...     volume  outstanding_share  turnover
0    1992-02-21   72.00   92.40  ...   343000.0          1000000.0  0.343000
1    1992-02-24   88.70   92.20  ...  2896000.0          1000000.0  2.896000
2    1992-02-25   80.00   84.00  ...   181000.0          1000000.0  0.181000
3    1992-02-26   81.00   81.00  ...   305000.0          1000000.0  0.305000
4    1992-02-27   80.00   84.00  ...   330000.0          1000000.0  0.330000
...         ...     ...     ...  ...        ...                ...       ...
7418 2024-07-16  196.42  197.63  ...   540175.0        293370465.0  0.001841
7419 2024-07-17  198.03  198.44  ...   527360.0        293370465.0  0.001798
7420 2024-07-18  195.61  196.01  ...   825069.0        293370465.0  0.002812
7421 2024-07-19  195.20  200.05  ...   902574.0        293370465.0  0.003077
7422 2024-07-22  198.44  202.48  ...   994281.0        293370465.0  0.003389
[7423 rows x 8 columns]
```

接口示例-前复权因子

```python
import akshare as ak

qfq_factor_df = ak.stock_zh_b_daily(symbol="sh900901", adjust="qfq-factor")
print(qfq_factor_df)
```

数据示例-前复权因子

```
         date            qfq_factor
0  2024-06-28    1.0000000000000000
1  2023-06-29    1.0128968423207000
2  2022-06-27    1.0235450730903000
3  2021-07-28    1.0414120633892000
4  2020-07-24    1.0621222316638000
5  2019-07-26    1.0776646873343000
6  2018-07-27    1.0933643235806000
7  2017-06-01    1.1126090142905000
8  2016-06-07    1.1260358798118000
9  2007-06-26    1.1339015467992000
10 2006-06-07    1.2472917014791000
11 2005-06-09    1.4454867952888000
12 2004-06-09    1.4781966336173000
13 2003-06-11    1.4917479863778000
14 2002-06-19    1.5062371240633000
15 2001-07-17    1.6596648576557000
16 2000-06-23    1.6787984081928000
17 1998-07-07    1.8889236772532000
18 1996-06-03    2.2667084127038000
19 1995-05-29    2.4933792539742000
20 1994-05-09    2.9920551047690000
21 1993-03-29    3.5280306737986000
22 1992-12-01    4.0414826776136000
23 1992-02-21  404.1482677613642500
24 1900-01-01  404.1482677613642500
```

接口示例-后复权因子

```python
import akshare as ak

hfq_factor_df = ak.stock_zh_b_daily(symbol="sh900901", adjust="hfq-factor")
print(hfq_factor_df)
```

数据示例-后复权因子

```
         date            hfq_factor
0  2024-06-28  404.1482677613642500
1  2023-06-29  399.0023967646893000
2  2022-06-27  394.8514612465220400
3  2021-07-28  388.0771905465590000
4  2020-07-24  380.5101293551464000
5  2019-07-26  375.0222796675719000
6  2018-07-27  369.6373286059189000
7  2017-06-01  363.2437474175006300
8  2016-06-07  358.9124245569568600
9  2007-06-26  356.4227149192948300
10 2006-06-07  324.0206499266317000
11 2005-06-09  279.5931924653872300
12 2004-06-09  273.4062969500634000
13 2003-06-11  270.9226165893487000
14 2002-06-19  268.3164963237175600
15 2001-07-17  243.5119752624272000
16 2000-06-23  240.7366279292711800
17 1998-07-07  213.9569071149911000
18 1996-06-03  178.2974225958258000
19 1995-05-29  162.0885659962053200
20 1994-05-09  135.0738049968378200
21 1993-03-29  114.5535016922676000
22 1992-12-01  100.0000000000000000
23 1992-02-21    1.0000000000000000
24 1900-01-01    1.0000000000000000
```

##### 分时数据

接口: stock_zh_b_minute

目标地址: http://finance.sina.com.cn/realstock/company/sh900901/nc.shtml

描述: 新浪财经 B 股股票或者指数的分时数据，目前可以获取 1, 5, 15, 30, 60 分钟的数据频率, 可以指定是否复权

限量: 单次返回指定股票或指数的指定频率的最近交易日的历史分时行情数据

输入参数

| 名称     | 类型  | 描述                                                         |
|--------|-----|------------------------------------------------------------|
| symbol | str | symbol='sh900901'; 同日频率数据接口                                |
| period | str | period='1'; 获取 1, 5, 15, 30, 60 分钟的数据频率                    |
| adjust | str | adjust=""; 默认为空: 返回不复权的数据; qfq: 返回前复权后的数据; hfq: 返回后复权后的数据; |

输出参数

| 名称     | 类型      | 描述  |
|--------|---------|-----|
| day    | object  | -   |
| open   | float64 | -   |
| high   | float64 | -   |
| low    | float64 | -   |
| close  | float64 | -   |
| volume | float64 | -   |

接口示例

```python
import akshare as ak

stock_zh_b_minute_df = ak.stock_zh_b_minute(symbol='sh900901', period='1', adjust="qfq")
print(stock_zh_b_minute_df)
```

数据示例

```
                      day      open      high       low     close volume
0     2024-06-28 14:41:00  0.472987  0.472987  0.472987  0.472987    100
1     2024-06-28 14:42:00  0.470996  0.470996  0.470000  0.470000  12000
2     2024-06-28 14:44:00  0.470996  0.470996  0.470996  0.470996   5000
3     2024-06-28 14:45:00  0.470996  0.470996  0.470996  0.470996  43600
4     2024-06-28 14:48:00  0.470000  0.470000  0.469004  0.469004  16000
...                   ...       ...       ...       ...       ...    ...
1965  2024-07-22 14:43:00  0.498994  0.498994  0.498994  0.498994   5000
1966  2024-07-22 14:48:00  0.497988  0.497988  0.497988  0.497988   1300
1967  2024-07-22 14:56:00  0.496982  0.496982  0.496982  0.496982    200
1968  2024-07-22 14:57:00  0.497988  0.497988  0.497988  0.497988   5100
1969  2024-07-22 15:00:00  0.500000  0.500000  0.500000  0.500000    400
[1970 rows x 6 columns]
```


接口: stock_zh_a_new

目标地址: http://vip.stock.finance.sina.com.cn/mkt/#new_stock

描述: 新浪财经-行情中心-沪深股市-次新股

限量: 单次返回所有次新股行情数据, 由于次新股名单随着交易日变化而变化，只能获取最近交易日的数据

输入参数

| 名称  | 类型  | 描述  |
|-----|-----|-----|
| -   | -   | -   |

输出参数

| 名称            | 类型      | 描述   |
|---------------|---------|------|
| symbol        | object  | 新浪代码 |
| code          | object  | 股票代码 |
| name          | object  | 股票简称 |
| open          | float64 | 开盘价  |
| high          | float64 | 最高价  |
| low           | float64 | 最低价  |
| volume        | int64   | 成交量  |
| amount        | int64   | 成交额  |
| mktcap        | float64 | 市值   |
| turnoverratio | float64 | 换手率  |

接口示例

```python
import akshare as ak

stock_zh_a_new_df = ak.stock_zh_a_new()
print(stock_zh_a_new_df)
```

数据示例

```
     symbol    code  name  ...      amount        mktcap  turnoverratio
0   sh601728  601728  中国电信  ...  2078538311  4.146314e+07        7.91425
1   sh601825  601825  沪农商行  ...   511698399  7.657689e+06        6.67390
2   sh601921  601921  浙版传媒  ...   218150606  2.284444e+06        9.66828
3   sh605028  605028  世茂能源  ...   248080378  3.996800e+05       24.98649
4   sh605056  605056  咸亨国际  ...    60691275  7.736193e+05        7.80149
..       ...     ...   ...  ...         ...           ...            ...
79  sz301052  301052  果麦文化  ...   231553223  2.541569e+05       38.94978
80  sz301053  301053  远信工业  ...   214016261  3.033018e+05       33.99790
81  sz301055  301055  C张小泉  ...   679460624  5.285280e+05       64.66610
82  sz301056  301056   C森赫  ...   423894365  3.694995e+05       48.84555
83  sz301058  301058  中粮工科  ...           0  0.000000e+00        0.00000
```

